---
marp: true
theme: default
paginate: true
footer: "T. Griffin ‚Äî Scheduling & Context Switching (scaffolding with OpenAI GPT-5)"
---

# üß© **Scheduling & Context Switching**

> ‚ÄúFairness, efficiency, and the illusion that everyone‚Äôs program is special.‚Äù

---

## üí° Big Idea

The CPU is the most coveted resource in the system.  
Scheduling decides **who gets it**, **for how long**, and **when to swap them out**.  
Context switching is how that swap actually happens.

---

## ‚öôÔ∏è Goals of CPU Scheduling

- **Maximize** CPU utilization
- **Minimize** waiting time and turnaround time
- **Maintain fairness** among processes
- **Respond quickly** to interactive users

The trick? You can‚Äôt optimize all four at once.

---

## üß† Types of Schedulers

| Type                 | When It Runs               | Role                                     |
| -------------------- | -------------------------- | ---------------------------------------- |
| **Long-Term (Job)**  | When jobs enter system     | Decides which jobs to admit              |
| **Short-Term (CPU)** | Every quantum or I/O event | Chooses which process gets CPU           |
| **Medium-Term**      | Occasionally               | Suspends or resumes processes (swapping) |

---

## üß© Scheduling Criteria

| Metric              | Meaning                      |
| ------------------- | ---------------------------- |
| **CPU Utilization** | % of time CPU is busy        |
| **Throughput**      | Jobs completed per unit time |
| **Turnaround Time** | Submit ‚Üí Finish              |
| **Waiting Time**    | Time spent in ready queue    |
| **Response Time**   | Time to first output         |

Different workloads ‚Üí different priorities.

---

## ‚öñÔ∏è Scheduling Algorithms at a Glance

| Algorithm                                | Pre-emptive? | Best For                        |
| ---------------------------------------- | ------------ | ------------------------------- |
| **FCFS** (First Come First Served)       | No           | Batch jobs with similar lengths |
| **SJF** (Shortest Job First)             | No           | Predictable CPU bursts          |
| **SRTF** (Shortest Remaining Time First) | Yes          | Interactive systems             |
| **RR** (Round Robin)                     | Yes          | Time-shared systems             |
| **Priority**                             | Either       | Controlled scheduling           |
| **Multilevel Queue**                     | Either       | Mixed workloads                 |

---

## üß© Round Robin Example

Quantum = 4 ms

```

P1: 0-8
P2: 0-4
P3: 0-2

```

Timeline:

```

|P1|P2|P3|P1|P1|
0      4  6     14

```

Fairness ‚Üë, context switch overhead ‚Üë.

---

## üß† Priority Scheduling

- Each process gets a priority value.
- Highest priority runs first.
- Can be pre-emptive or non-pre-emptive.

**Problem:** Starvation of low-priority tasks.  
**Fix:** _Aging_ ‚Äî gradually increase priority over time.

---

## üß© Multilevel Queue

Separate ready queues for different types of processes:  
interactive, batch, system, etc.

Each queue has its own scheduling algorithm.  
High-priority queues pre-empt lower ones.

Great for OS design; terrible for fairness if mis-tuned.

---

## üß† Context Switching Explained

When the CPU switches from one process to another:

1. Save the old process‚Äôs state (registers, PC, etc.)
2. Load the new process‚Äôs state
3. Update CPU and MMU to reflect the new process

Takes microseconds ‚Üí millions per second possible.

---

## ‚öôÔ∏è Context Switch Overhead

| Factor                       | Impact             |
| ---------------------------- | ------------------ |
| Saving & restoring registers | CPU cycles lost    |
| Cache flush / reload         | Miss penalty       |
| TLB invalidation             | Memory latency     |
| OS scheduler time            | Administrative tax |

Too many switches ‚Üí thrashing.

---

## üß© Pre-emption vs Co-operative

- **Pre-emptive:** OS forcibly interrupts a running process.
  > Keeps system responsive.
- **Co-operative:** Process voluntarily yields CPU.
  > Simpler but dangerous if a process misbehaves.

Modern OSes = mix of both.

---

## üß† Scheduling in Practice

| System     | Strategy                                               |
| ---------- | ------------------------------------------------------ |
| Linux CFS  | Fair proportion of CPU time per task (based on weight) |
| Windows NT | Priority-based round robin per class                   |
| Mac / BSD  | Multilevel feedback queue with aging                   |
| RTOS       | Strict priority + deadline awareness                   |

---

## üß© Visualization Idea ‚Äì Scheduler Loop

Simulate ready queue rotation for 3-5 jobs.  
Track `ready ‚Üí running ‚Üí waiting ‚Üí ready` states.  
Display timeline or Gantt chart of CPU allocation.

Pairs well with the **Process Zoo** project.

---

## üéØ Exit Prompt

> ‚ÄúWhat does ‚Äòfair‚Äô mean to a CPU scheduler?‚Äù  
> Discuss whether fairness is about equal time, equal progress, or equal importance.

---

## üíæ Summary

| Concept        | Core Idea                            |
| -------------- | ------------------------------------ |
| Scheduling     | Decides who runs and for how long    |
| Context Switch | Mechanism that makes it happen       |
| Algorithms     | Balance throughput vs responsiveness |
| Overhead       | Unavoidable, manageable              |
| Fairness       | Philosophy disguised as code         |

---

## üß≠ Next Topic

[Week 01 Topic 04: Concurrency & Synchronization ‚ñ∂Ô∏è](https://github.com/rugbyprof/5143-Operating-Systems/tree/master/Lectures/OS_Highlights/Week_01/004.pdf)

<a href="https://github.com/rugbyprof/5143-Operating-Systems/tree/master/Lectures/OS_Highlights/Week_01/004.pdf">Week 01 Topic 04: Concurrency & Synchronization ‚ñ∂Ô∏è </a>

---

## üìö References & Credits

> **topic:** "Operating Systems Week 1 Lecture Slides"  
> **focus:** "Scheduling and Context Switching"  
> **format:** "Markdown-based slide content"  
> **author:** "T. Griffin and OpenAI GPT-5"  
> **credit:** "Concept scaffolding with ChatGPT (OpenAI GPT-5)"

---
